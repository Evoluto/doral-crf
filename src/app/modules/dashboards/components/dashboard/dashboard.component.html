<div class="row">
  <!-- Column -->
  <div class="col-md-6 col-lg-3 col-xlg-3">
    <div class="card">
      <div class="box p-2 rounded bg-info text-center">
        <h1 class="font-weight-light text-white">${{applicant.allocation_amount | number}}</h1>
        <h6 class="text-white">Total Allocated</h6>
      </div>
    </div>
  </div>
  <!-- Column -->
  <div class="col-md-6 col-lg-3 col-xlg-3">
    <div class="card">
      <div class="box p-2 rounded bg-danger text-center">
        <h1 class="font-weight-light text-white">${{applicant.total_submitted | number}}</h1>
        <h6 class="text-white">Total Submitted</h6>
      </div>
    </div>
  </div>
  <!-- Column -->
  <div class="col-md-6 col-lg-3 col-xlg-3">
    <div class="card">
      <div class="box p-2 rounded bg-success text-center">
        <h1 class="font-weight-light text-white">${{applicant.total_approved | number}}</h1>
        <h6 class="text-white">Total Approved</h6>
      </div>
    </div>
  </div>
  <!-- Column -->
  <div class="col-md-6 col-lg-3 col-xlg-3">
    <div class="card">
      <div class="box p-2 rounded bg-warning text-center">
        <h1 class="font-weight-light text-white">${{applicant.allocation_amount - applicant.total_approved | number}}</h1>
        <h6 class="text-white">Remaining Balance</h6>
      </div>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-header bg-secondary text-white">
    <h4>Application Activity</h4>
  </div>
  <div class="card-body" *ngIf="apps.length > 0">
      <table datatable
          [dtOptions]="dtOptions"
          [dtTrigger]="dtTrigger"
          class="row-border hover">
          <thead>
              <tr>
                  <th>App #</th>
                  <th>Application Title</th>
                  <th>Status</th>
                  <th>Total Request</th>
                  <th>Applicant Submission Date</th>
                  <th>DFA Review Start Date</th>
                  <th>DFA Approval Date</th>
                  <th>DFA Approval Decision</th>
              </tr>
          </thead>
          <tbody>
              <ng-container *ngFor="let rw of apps let i=index">
              <tr *ngIf="i<3" (click)="appRowClick(rw)">
                  <td>APP-{{ rw.id }}</td>
                  <td>{{ rw.application_title }}</td>
                  <td>{{ rw.status }}</td>
                  <td>{{ rw.total_request | currency}} </td>
                  <td>{{ rw.date_of_applicant_submission }}</td>
                  <td>{{ rw.date_of_dfa_review_start }}</td>
                  <td>{{ rw.date_of_dfa_approval}}</td>
                  <td>{{ rw.dfa_approval_decision}}</td>
              </tr>
              </ng-container>
          </tbody>
      </table>
  </div>
  <div class="card-body" *ngIf="apps.length == 0">
    <div class="card-header text-center">No Applications with Activity within last 5 days</div>
  </div>
</div>

<div class="card">
  <div class="card-header bg-secondary text-white">
    <h4>New Communications</h4>
  </div>
  <div class="card-body" *ngIf="threads.length > 0">
      <table datatable
          [dtOptions]="threadDtOptions"
          [dtTrigger]="dtTrigger"
          class="row-border hover">
          <thead>
              <tr>
                <th></th>
                <th>App #</th>
                <th>Application Title</th>
                <th>Type</th>
                <th>Created Date</th>
                <th>Status</th>
                <th>Subject</th>
                <th>Details</th>
              </tr>
          </thead>
          <tbody>
              <ng-container *ngFor="let rw of threads let i=index">
                <tr *ngIf="i<3" (click)="comRowClick(rw)">
                  <td class="text-left">
                    <span *ngIf="hasAttachment(rw)" class="comm-attachment">
                      <i class="fa fa-paperclip text-secondary"></i>
                    </span>
                  </td>
                  <td>APP-{{ rw.id }}</td>
                  <td>{{ rw.application_title }}</td>
                  <td>{{ rw.type }}</td>
                  <td>{{ rw.datecreated * 1000 | date:'M/dd/yyyy h:mm a'}}</td>
                  <td>{{ rw.status }}</td>
                  <td>{{ rw.subject}}</td>
                  <td>{{ rw.details}}</td>
                </tr>
              </ng-container>
          </tbody>
      </table>
  </div>
  <div class="card-body" *ngIf="threads.length == 0">
    <div class="card-header text-center">No new communications.</div>
  </div>
</div>